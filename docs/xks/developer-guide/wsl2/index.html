<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Xenit RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Xenit Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-5K3TQ3K"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-5K3TQ3K",{anonymize_ip:!0})</script><title data-react-helmet="true">Working with XKF from Windows | Xenit</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="http://xenitab.github.io/img/Xenit_logo_Svart.png"><meta data-react-helmet="true" name="twitter:image" content="http://xenitab.github.io/img/Xenit_logo_Svart.png"><meta data-react-helmet="true" property="og:url" content="http://xenitab.github.io/docs/xks/developer-guide/wsl2"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Working with XKF from Windows | Xenit"><meta data-react-helmet="true" name="description" content="The reason for this documentation is that we are using a number of Linux-based tools to be able to have a good integration with Windows, we recommend to use Linux as a base for this."><meta data-react-helmet="true" property="og:description" content="The reason for this documentation is that we are using a number of Linux-based tools to be able to have a good integration with Windows, we recommend to use Linux as a base for this."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://xenitab.github.io/docs/xks/developer-guide/wsl2"><link data-react-helmet="true" rel="alternate" href="http://xenitab.github.io/docs/xks/developer-guide/wsl2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://xenitab.github.io/docs/xks/developer-guide/wsl2" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.018923a1.css">
<link rel="preload" href="/assets/js/runtime~main.357531cd.js" as="script">
<link rel="preload" href="/assets/js/main.7b34fb71.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Xenit_logo_Svart.png" alt="Xenit logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/Xenit_logo_Vit.png" alt="Xenit logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a href="https://github.com/XenitAB" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/xks/">Xenit Kubernetes Service</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/architecture-and-design">Architecture and design</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/docs/xks/developer-guide/introduction">Developer Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/api-migrations">API migrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/secrets-management">Secrets Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/cloud-iam">Cloud IAM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/container-security">Container Security</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/xks/developer-guide/ci-cd/ci">CI/CD</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/scheduling-scaling">Scheduling and Scaling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/observability">Observability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/networking">Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/xks/developer-guide/wsl2">Working with XKF from Windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/reports">Reports</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/developer-guide/best-practices">Best Practices</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/xks/operator-guide/">Operator Guide</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/xenit-style-guide/containers">Xenit Style Guide</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Working with XKF from Windows</h1></header><p>The reason for this documentation is that we are using a number of Linux-based tools to be able to have a good integration with Windows, we recommend to use Linux as a base for this.
This document is verified using Ubuntu version 20.04 but other distributions will most likely work.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="installation-of-wsl2---windows-subsystem-for-linux">Installation of WSL2 - Windows Subsystem for Linux<a class="hash-link" href="#installation-of-wsl2---windows-subsystem-for-linux" title="Direct link to heading">​</a></h2><p><a href="https://docs.microsoft.com/en-us/windows/wsl/install" target="_blank" rel="noopener noreferrer">Install via Powershell</a></p><p>Installation is also possible via Microsoft Store. Search for “linux”.</p><p>Make sure that Windows Subsystem for Linux is enabled as a feature in Windows.</p><p>In Windows: Go to Control Panel → Programs and Features.</p><p>In the left-hand menu, select “Turn Windows features on or off”</p><img alt="wsl-enable" src="/img/assets/xks/developer-guide/wsl-enable.png"><h2 class="anchor anchorWithStickyNavbar_mojV" id="install-docker-desktop">Install Docker-Desktop<a class="hash-link" href="#install-docker-desktop" title="Direct link to heading">​</a></h2><p><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">Download and install Docker.</a></p><p>Once installation is complete, verify that the application works. We experienced issues when trying to start Docker-desktop within a managed organization using AD accounts, this caused an error with us not being members of a group called “docker-users“.
To solve this, open up “Computer Management” in Windows as an administrator. Navigate to “local users and groups” → Groups and locate the &quot;docker-users&quot; group and double-click.Press “Add” and search for “Authenticated Users” and add to the group.</p><p>Now sign out from Windows and sign back in, and the Docker application should work.</p><p>Verify in settings that the WSL2-based engine is used.</p><img alt="docker1" src="/img/assets/xks/developer-guide/docker1.png"><p>Also under settings, go to Resources → WSL Integration and verify that you have access to the WSL integration with your installed WSL (in this case Ubuntu), and make sure it is checked.</p><img alt="docker2" src="/img/assets/xks/developer-guide/docker2.png"><p>To verify functionality:</p><p>In your Ubuntu WSL2 instance - Run the command:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run hello-world</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Wait for the image to be pulled and if everything works properly the output should be:</p><blockquote><p>Hello from Docker!
This message shows that your installation appears to be working correctly.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="utilising-make-with-wsl2-terraform-and-docker">Utilising Make with WSL2, Terraform and Docker<a class="hash-link" href="#utilising-make-with-wsl2-terraform-and-docker" title="Direct link to heading">​</a></h2><p>We have noticed when running Terraform from within our Ubuntu instance, that there appears to be some network issues. We saw quite slow network connections, probably caused by the TCP connection, which resulted in the following error:</p><blockquote><p>│ Error: Failed to install provider
│
│ Error while installing hashicorp/azurerm v2.64.0: local error: tls: bad record MAC</p></blockquote><p>We ran the Terraform command again - and it worked perfectly.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="issues">Issues<a class="hash-link" href="#issues" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="file-lock-issues">File lock issues<a class="hash-link" href="#file-lock-issues" title="Direct link to heading">​</a></h3><p>If your <code>.azure</code> folder is mounted towards Windows from your WSL2 environment we have seen potential lock issues when running terraform and <code>azure-cli 2.32.0</code>, this might apply to other versions as well.</p><p>We think this have something to do with how WSL2 and Windows manages locking of files, to workaround you can make sure that your <code>.azure</code> folder is only in your Linux environment.</p><p>Assuming that you have not defined a custom <code>AZURE_CONFIG_DIR</code> you can perform the following to verify you are mounting your <code>.azure</code> folder to Windows:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">ls</span><span class="token plain"> -la</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwx------ </span><span class="token number" style="color:rgb(247, 140, 108)">61</span><span class="token plain"> user1 user1    </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><span class="token plain"> Jan </span><span class="token number" style="color:rgb(247, 140, 108)">14</span><span class="token plain"> 09:21 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x  </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> root  root     </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><span class="token plain"> Feb </span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">2021</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x  </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain"> user1 user1    </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><span class="token plain"> Dec </span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">13</span><span class="token plain">:04 .azure -</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> /mnt/c/Users/user1/.azure</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Running the following commands will create a new <code>.azure</code> folder in your current working directory and tell <code>azure-cli</code> to use that folder to store its login data.
Remember that the <code>export</code> command only is per terminal. You can make the config persistent by adding the export command to your <code>.bashrc</code> file located in your home folder.</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">AZURE_CONFIG_DIR</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable builtin class-name" style="color:rgb(255, 203, 107)">pwd</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain">/.azure</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Store Azure CLI configuration here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> -d </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable builtin class-name" style="color:rgb(255, 203, 107)">pwd</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain">/.azure </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable builtin class-name" style="color:rgb(255, 203, 107)">pwd</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain">/.azure</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># login to azure agaiin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">az login</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This is a example how the traceback look liked when we encountered this error:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ Error: getting authenticated object ID: Error parsing json result from the Azure CLI: Error waiting </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> the Azure CLI: </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exit</span><span class="token plain"> status </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">: ERROR: The </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">command</span><span class="token plain"> failed with an unexpected error. Here is the traceback:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ ERROR: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Errno </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> No such </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> or directory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ Traceback </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/commands/command_operation.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">352</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> handler</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ client </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self.client_factory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self.cli_ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> self.client_factory </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ TypeError: get_graph_client_signed_in_users</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> missing </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> required positional argument: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;_&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ During handling of the above exception, another exception occurred:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ Traceback </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/knack/cli.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">231</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> invoke</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ cmd_result </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self.invocation.execute</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/commands/__init__.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">657</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> execute</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ raise ex</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/commands/__init__.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">720</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> _run_jobs_serially</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ results.append</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self._run_job</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">expanded_arg, cmd_copy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/commands/__init__.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">712</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> _run_job</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">return</span><span class="token plain"> cmd_copy.exception_handler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/command_modules/role/commands.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">69</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> graph_err_handler</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ raise ex</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/commands/__init__.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">691</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> _run_job</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ result </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> cmd_copy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/commands/__init__.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">328</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> __call__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">return</span><span class="token plain"> self.handler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">*args, **kwargs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/commands/command_operation.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">354</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> handler</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ client </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self.client_factory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self.cli_ctx, command_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> self.client_factory </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/command_modules/role/commands.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">89</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> get_graph_client_signed_in_users</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">return</span><span class="token plain"> _graph_client_factory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cli_ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">.signed_in_user</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/command_modules/role/_client_factory.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> _graph_client_factory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">resource</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">cli_ctx.cloud.endpoints.active_directory_graph_resource_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/_profile.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">335</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> get_login_credentials</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ credential </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self._create_credential</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">account, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">client_id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">client_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/_profile.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">588</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> _create_credential</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">return</span><span class="token plain"> identity.get_user_credential</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">username_or_sp_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/auth/identity.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">182</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> get_user_credential</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">return</span><span class="token plain"> UserCredential</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self.client_id, username, **self._msal_app_kwargs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/azure/cli/core/auth/msal_authentication.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">41</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> __init__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ accounts </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self.get_accounts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/msal/application.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">872</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> get_accounts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ accounts </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self._find_msal_accounts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">environment</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">self.authority.instance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/msal/application.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">912</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> _find_msal_accounts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">query</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">​​</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;environment&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">​​</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/msal_extensions/token_cache.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">53</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">find</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ with CrossPlatLock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self._lock_location</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/msal_extensions/cache_lock.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">29</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> __enter__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ file_handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self._lock.__enter__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/portalocker/utils.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">199</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> __enter__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">return</span><span class="token plain"> self.acquire</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/portalocker/utils.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">161</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> acquire</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ fh </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self._prepare_fh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ File </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/opt/az/lib/python3.6/site-packages/portalocker/utils.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:rgb(247, 140, 108)">194</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> _prepare_fh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ fh.truncate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ FileNotFoundError: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Errno </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> No such </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> or directory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ To </span><span class="token function" style="color:rgb(130, 170, 255)">open</span><span class="token plain"> an issue, please run: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;az feedback&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ with provider</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;registry.terraform.io/hashicorp/azuread&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ on main.tf line </span><span class="token number" style="color:rgb(247, 140, 108)">19</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> provider </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;azuread&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ </span><span class="token number" style="color:rgb(247, 140, 108)">19</span><span class="token plain">: provider </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;azuread&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">​​</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">​​</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/xenitab/xenitab.github.io/edit/main/docs/xks/developer-guide/wsl2.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/xks/developer-guide/networking"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Networking</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/xks/developer-guide/reports"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Reports</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation-of-wsl2---windows-subsystem-for-linux" class="table-of-contents__link toc-highlight">Installation of WSL2 - Windows Subsystem for Linux</a></li><li><a href="#install-docker-desktop" class="table-of-contents__link toc-highlight">Install Docker-Desktop</a></li><li><a href="#utilising-make-with-wsl2-terraform-and-docker" class="table-of-contents__link toc-highlight">Utilising Make with WSL2, Terraform and Docker</a></li><li><a href="#issues" class="table-of-contents__link toc-highlight">Issues</a><ul><li><a href="#file-lock-issues" class="table-of-contents__link toc-highlight">File lock issues</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.357531cd.js"></script>
<script src="/assets/js/main.7b34fb71.js"></script>
</body>
</html>