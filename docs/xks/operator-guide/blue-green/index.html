<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<title data-react-helmet="true">Blue Green Clusters | Xenit</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Blue Green Clusters | Xenit"><meta data-react-helmet="true" name="description" content="For different reasons you might want to create a completely new cluster, this can be due to many reasons like:"><meta data-react-helmet="true" property="og:description" content="For different reasons you might want to create a completely new cluster, this can be due to many reasons like:"><meta data-react-helmet="true" property="og:url" content="http://xenitab.github.io/docs/xks/operator-guide/blue-green"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://xenitab.github.io/docs/xks/operator-guide/blue-green"><link rel="stylesheet" href="/styles.b2afff22.css">
<link rel="preload" href="/styles.3762a54a.js" as="script">
<link rel="preload" href="/runtime~main.be084da3.js" as="script">
<link rel="preload" href="/main.c8e20889.js" as="script">
<link rel="preload" href="/1.a46f6efc.js" as="script">
<link rel="preload" href="/31.e28a15fd.js" as="script">
<link rel="preload" href="/32.0fedd394.js" as="script">
<link rel="preload" href="/935f2afb.c98949a1.js" as="script">
<link rel="preload" href="/30.21fb5129.js" as="script">
<link rel="preload" href="/12bd172e.802282d3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/Xenit_logo_Svart.png" alt="Xenit logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/Xenit_logo_Vit.png" alt="Xenit logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://github.com/XenitAB" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/Xenit_logo_Svart.png" alt="Xenit logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/Xenit_logo_Vit.png" alt="Xenit logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/XenitAB" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Xenit Kubernetes Service</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/architecture-and-design">Architecture and design</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Developer Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/gitops">GitOps a la XKS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/best-practices">Best Practices</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/secrets-management">Secrets Managenent</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/cloud-iam">Cloud IAM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/security">Security</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/cd">Continuous Delivery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/ci">Continuous Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/flux">Flux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/networking">Networking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/developer-guide/wsl2">Working with XKF from Windows</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Operator Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/operator-guide/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/operator-guide/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/operator-guide/agents">Agents</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/operator-guide/blast-radius">Blast Radius</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/xks/operator-guide/blue-green">Blue Green Clusters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/operator-guide/aws-azdo">AWS azure-devops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/xks/operator-guide/github">XKF on Github</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Kubernetes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/operator-guide/kubernetes/aks">AKS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/xks/operator-guide/kubernetes/eks">EKS</a></li></ul></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Blue Green Clusters</h1></header><div class="markdown"><p>For different reasons you might want to create a completely new cluster, this can be due to many reasons like:</p><ul><li>Broken cluster</li><li>Test patch the cluster</li><li>Major breaking change</li></ul><p>Thanks to this XKF support performing blue-green deployment on an entire kubernetes cluster, this is applicable for both Azure and AWS.
These docs is intended for both clouds, the main difference is in the naming.</p><p>Today XKS does not support any way of only doing blue green on a specific environment.
If you need too perform blue green on QA you should do it in dev and prod as well.
We think that the risk is to great that you by mistake would get drift between the modules used in the different clusters would be to great.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="workflow"></a>Workflow<a aria-hidden="true" class="hash-link" href="#workflow" title="Direct link to heading">#</a></h2><blockquote><p>We assume that the workloads on the clusters are stateless and can run multiple instances.</p></blockquote><ol><li>Set up a new cluster in the target environment using Terraform</li><li>Verify that the new cluster is functioning as intended<ul><li>You <strong>won&#x27;t</strong> be able to verify any ingress</li><li>You <strong>won&#x27;t</strong> be able to use AZAD-proxy in the newly created cluster</li></ul></li><li>Change the TXT DNS records over to the newly created cluster</li><li>Verify that the ingress traffic is migrated to the new cluster and it is working as intended</li><li>Destroy the old cluster using terraform</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="dns-migration"></a>DNS migration<a aria-hidden="true" class="hash-link" href="#dns-migration" title="Direct link to heading">#</a></h2><p>You can find a small small script bellow to make the migration of DNS easier.
As always use at your own risk and make sure that you understand what the script does.</p><p>Our recommendation is that you migrate one DNS record manually and verify that the ingress and the new cluster is working as intended,
when you know that you can run the script.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="azure"></a>Azure<a aria-hidden="true" class="hash-link" href="#azure" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ENVIRONMENT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;dev&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">OLD_OWNER_ID</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">${ENVIRONMENT}</span><span class="token string" style="color:rgb(195, 232, 141)">-aks1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NEW_OWNER_ID</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">${ENVIRONMENT}</span><span class="token string" style="color:rgb(195, 232, 141)">-aks2&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RESOURCE_GROUP_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;rg-</span><span class="token string variable" style="color:rgb(191, 199, 213)">${ENVIRONMENT}</span><span class="token string" style="color:rgb(195, 232, 141)">-we-aks&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ZONE_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">${ENVIRONMENT}</span><span class="token string" style="color:rgb(195, 232, 141)">.domain.se&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ZONE_RECORDS</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">az network dns record-set txt list -g $</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token variable" style="color:rgb(191, 199, 213)">RESOURCE_GROUP_NAME</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token variable" style="color:rgb(191, 199, 213)"> -z $</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token variable" style="color:rgb(191, 199, 213)">ZONE_NAME</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)"> jq -rc </span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;.[]&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ZONE_RECORDS_CSV_ARRAY</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">jq -rc </span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;. | [.name, (.txtRecords[0].value[0] | @base64)] | join(&quot;;&quot;)&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable operator" style="color:rgb(137, 221, 255)">&lt;&lt;&lt;</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token variable string variable" style="color:rgb(191, 199, 213)">${ZONE_RECORDS}</span><span class="token variable string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(191, 199, 213)">ZONE_RECORD_CSV</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">${ZONE_RECORDS_CSV_ARRAY</span><span class="token string variable punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string variable" style="color:rgb(191, 199, 213)">@</span><span class="token string variable punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token string variable" style="color:rgb(191, 199, 213)">}</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ZONE_RECORD_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">awk</span><span class="token variable" style="color:rgb(191, 199, 213)"> -F</span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;;&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;{print </span><span class="token variable string variable" style="color:rgb(191, 199, 213)">$1</span><span class="token variable string" style="color:rgb(195, 232, 141)">}&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable operator" style="color:rgb(137, 221, 255)">&lt;&lt;&lt;</span><span class="token variable" style="color:rgb(191, 199, 213)"> $ZONE_RECORD_CSV</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">OLD_ZONE_TXT_VALUE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">awk</span><span class="token variable" style="color:rgb(191, 199, 213)"> -F</span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;;&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;{print </span><span class="token variable string variable" style="color:rgb(191, 199, 213)">$2</span><span class="token variable string" style="color:rgb(195, 232, 141)">}&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable operator" style="color:rgb(137, 221, 255)">&lt;&lt;&lt;</span><span class="token variable" style="color:rgb(191, 199, 213)"> $ZONE_RECORD_CSV </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)"> base64 -d</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${OLD_ZONE_TXT_VALUE}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">~ </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;owner=</span><span class="token string variable" style="color:rgb(191, 199, 213)">${OLD_OWNER_ID}</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NEW_ZONE_TXT_VALUE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">${OLD_ZONE_TXT_VALUE</span><span class="token variable operator" style="color:rgb(137, 221, 255)">/</span><span class="token variable" style="color:rgb(191, 199, 213)">owner=${OLD_OWNER_ID}</span><span class="token plain">/owner</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">${NEW_OWNER_ID}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> Updating external-dns owner of </span><span class="token variable" style="color:rgb(191, 199, 213)">${ZONE_RECORD_NAME}</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${OLD_OWNER_ID}</span><span class="token plain"> to </span><span class="token variable" style="color:rgb(191, 199, 213)">${NEW_OWNER_ID}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    az network dns record-set txt add-record --resource-group </span><span class="token variable" style="color:rgb(191, 199, 213)">${RESOURCE_GROUP_NAME}</span><span class="token plain"> --zone-name </span><span class="token variable" style="color:rgb(191, 199, 213)">${ZONE_NAME}</span><span class="token plain"> --record-set-name </span><span class="token variable" style="color:rgb(191, 199, 213)">${ZONE_RECORD_NAME}</span><span class="token plain"> --value </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">${NEW_ZONE_TXT_VALUE}</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">/dev/null</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    az network dns record-set txt remove-record --resource-group </span><span class="token variable" style="color:rgb(191, 199, 213)">${RESOURCE_GROUP_NAME}</span><span class="token plain"> --zone-name </span><span class="token variable" style="color:rgb(191, 199, 213)">${ZONE_NAME}</span><span class="token plain"> --record-set-name </span><span class="token variable" style="color:rgb(191, 199, 213)">${ZONE_RECORD_NAME}</span><span class="token plain"> --value </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">${OLD_ZONE_TXT_VALUE}</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">/dev/null</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">fi</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">done</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/xenitab/xenitab.github.io/edit/main/docs/xks/operator-guide/blue-green.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/xks/operator-guide/blast-radius"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Blast Radius</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/xks/operator-guide/aws-azdo"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">AWS azure-devops Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#workflow" class="table-of-contents__link">Workflow</a></li><li><a href="#dns-migration" class="table-of-contents__link">DNS migration</a><ul><li><a href="#azure" class="table-of-contents__link">Azure</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/styles.3762a54a.js"></script>
<script src="/runtime~main.be084da3.js"></script>
<script src="/main.c8e20889.js"></script>
<script src="/1.a46f6efc.js"></script>
<script src="/31.e28a15fd.js"></script>
<script src="/32.0fedd394.js"></script>
<script src="/935f2afb.c98949a1.js"></script>
<script src="/30.21fb5129.js"></script>
<script src="/12bd172e.802282d3.js"></script>
</body>
</html>