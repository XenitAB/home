{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Xenit Welcome to Xenit open source projects! Documentation azure-devops-templates terraform-modules","title":"Xenit"},{"location":"#xenit","text":"Welcome to Xenit open source projects!","title":"Xenit"},{"location":"#documentation","text":"azure-devops-templates terraform-modules","title":"Documentation"},{"location":"azure-devops-templates/","text":"Azure DevOps Templates Collection of templates to use in Azure DevOps. Usage Currently Azure DevOps does not support referencing templates from public GitHub repositories without specifiying a valid service connection. This would be too cumborsome to deal with for multiple organizations. Instead this repo is best used by creating a mirror of it, and using a pipeline to synchronize the content from upstream. Importing the repository to Azure DevOps Begin by importing the repository into a global project in your organization. Azure DevOps > Project > Repos > Import Repository Repository type: Git Clone URL: https://github.com/XenitAB/azure-devops-templates.git [ ] Requires Authentication Name: azure-devops-templates Press Import Configuring Build Service permissions Configure Build Service to have permission to push changes to the template repository. Azure DevOps > Project > Project settings > Repositories > azure-devops-templates > Permissions [Project Name] Build Service ([org name]): Contribute: Allow Create branch: Allow Adding Azure Pipelines for repository syncronization Then create a pipeline from the definition located in ./ci/pipeline.yaml , this pipeline will sync with Github. Any time you want to get the latest changes you need to run this pipeline. Azure DevOps > Project > Repos > Set up build Choose Azisting Azure Pipelines YAML file Branch: master Path: /.ci/pipeline.yaml Press Continue > Press Run Adding reference to the synchronized repository You should be able to use the templates when the mirroring is complete by referencing the git repository. resources: repositories: - repository: templates type: git name: <project>/azure-devops-templates ref: refs/tags/<version> stages: - template: gitops/deploy/pipeline.yaml@templates Versioning Versions follow the CalVer standard. This simplifies detecting usage of very old versions. The versions should use the following pattern YYYY.0M.MICRO . The micro value starts at 0 and increments by one for each release during the same month. License This project is licensed under the MIT License - see the LICENSE file for details.","title":"Azure DevOps Templates"},{"location":"azure-devops-templates/#azure-devops-templates","text":"Collection of templates to use in Azure DevOps.","title":"Azure DevOps Templates"},{"location":"azure-devops-templates/#usage","text":"Currently Azure DevOps does not support referencing templates from public GitHub repositories without specifiying a valid service connection. This would be too cumborsome to deal with for multiple organizations. Instead this repo is best used by creating a mirror of it, and using a pipeline to synchronize the content from upstream.","title":"Usage"},{"location":"azure-devops-templates/#importing-the-repository-to-azure-devops","text":"Begin by importing the repository into a global project in your organization. Azure DevOps > Project > Repos > Import Repository Repository type: Git Clone URL: https://github.com/XenitAB/azure-devops-templates.git [ ] Requires Authentication Name: azure-devops-templates Press Import","title":"Importing the repository to Azure DevOps"},{"location":"azure-devops-templates/#configuring-build-service-permissions","text":"Configure Build Service to have permission to push changes to the template repository. Azure DevOps > Project > Project settings > Repositories > azure-devops-templates > Permissions [Project Name] Build Service ([org name]): Contribute: Allow Create branch: Allow","title":"Configuring Build Service permissions"},{"location":"azure-devops-templates/#adding-azure-pipelines-for-repository-syncronization","text":"Then create a pipeline from the definition located in ./ci/pipeline.yaml , this pipeline will sync with Github. Any time you want to get the latest changes you need to run this pipeline. Azure DevOps > Project > Repos > Set up build Choose Azisting Azure Pipelines YAML file Branch: master Path: /.ci/pipeline.yaml Press Continue > Press Run","title":"Adding Azure Pipelines for repository syncronization"},{"location":"azure-devops-templates/#adding-reference-to-the-synchronized-repository","text":"You should be able to use the templates when the mirroring is complete by referencing the git repository. resources: repositories: - repository: templates type: git name: <project>/azure-devops-templates ref: refs/tags/<version> stages: - template: gitops/deploy/pipeline.yaml@templates","title":"Adding reference to the synchronized repository"},{"location":"azure-devops-templates/#versioning","text":"Versions follow the CalVer standard. This simplifies detecting usage of very old versions. The versions should use the following pattern YYYY.0M.MICRO . The micro value starts at 0 and increments by one for each release during the same month.","title":"Versioning"},{"location":"azure-devops-templates/#license","text":"This project is licensed under the MIT License - see the LICENSE file for details.","title":"License"},{"location":"azure-devops-templates/gitops/","text":"GitOps The GitOps templates are meant to be used with Flux v1 to build docker images and update a repository with the new image tag. Architecture Template Format Parameter names that end with Template will be templated before they are used. They are templted with the format command . The format command is passed the environment name, which can be placed in the string. Build Name Default Description poolVmImage \"ubuntu-16.04\" VM Image to set in pool configuration. poolName \"\" Pool name to set in pool configuration. sourceBranch \"refs/heads/master\" Source branch to limit image builds to. dockerfilePath \"./Dockerfile\" Path to Dockerfile used in build. dockerBuildArgs \"\" Additional build args to append when building docker image. serviceName \"\" Name of application or service, will also be the name of the image. preBuild [] Steps to run before Docker build, takes a list of steps. postBuild [] Steps to run after Docker build, takes a list of steps. dockerLint.enable true Enable running Docker lint step. dockerLint.ignoreRuleViolations true Continues if any Docker lint violations occur. imageScan.enable true Enable running Image scan step. imageScan.ignoreRuleViolations true Continues if any Image scan violations occur. binaries.hadolint.tag v.18.0 Version of hadolint to download. binaries.hadolint.sha f9bc9de12438b463ca84e77fde70b07b155d4da07ca21bc3f4354a62c6199db4 SHA sum to verify downloaded hadolint binary with. binaries.trivy.tag `v0.12.0 Version of trivy to download. binaries.trivy.sha 4003d993d4b6b5673d4ef6e216578e8ac2bf6b439201a8e748a75fc68430c3f5 SHA sum to verify downloaded trivy archive with. Deploy Name Default Description poolNameTemplate \"\" Name of pool to use in template format. sourceBranch \"refs/heads/master\" Source branch to limit image builds to. serviceName \"\" Name of the service, should match service name in build. azureSubscriptionTemplate \"\" Name of Azure subscription in template format. acrNameTemplate \"\" Name of ACr to use in template format. imagePathPrefix \"\" Prefix to append to image name before pushing to ACR. environments [{name: dev, deployTags: false}, {name: qa, deployTags: true}, {name: prod, deployTags: true}] Environments that should be deployed to. Examples Build name: $(Build.BuildId) trigger: batch: true branches: include: - master tags: include: - \"*\" paths: include: - \"*\" resources: repositories: - repository: templates type: git name: XenitKubernetesService/azure-devops-templates ref: refs/tags/2020.10.0 stages: - template: gitops/build/main.yaml@templates parameters: serviceName: \"podinfo\" Deploy name: $(Build.BuildId) trigger: none resources: repositories: - repository: templates type: git name: XenitKubernetesService/azure-devops-templates ref: refs/tags/2020.10.2 pipelines: - pipeline: ciPipeline source: ci-podinfo trigger: stages: - cd_trigger # Stage will only trigger if the build reason isn't pull request stages: - template: gitops/deploy/main.yaml@templates parameters: poolNameTemplate: \"xks-{0}\" serviceName: \"podinfo\" azureSubscriptionTemplate: \"azure-{0}-lab-contributor\" acrNameTemplate: \"acr{0}wexks\" imagePathPrefix: \"lab\" imageTagPath: \".spec.values.application.buildId\" environments: - name: dev deployTags: false","title":"GitOps"},{"location":"azure-devops-templates/gitops/#gitops","text":"The GitOps templates are meant to be used with Flux v1 to build docker images and update a repository with the new image tag.","title":"GitOps"},{"location":"azure-devops-templates/gitops/#architecture","text":"","title":"Architecture"},{"location":"azure-devops-templates/gitops/#template-format","text":"Parameter names that end with Template will be templated before they are used. They are templted with the format command . The format command is passed the environment name, which can be placed in the string.","title":"Template Format"},{"location":"azure-devops-templates/gitops/#build","text":"Name Default Description poolVmImage \"ubuntu-16.04\" VM Image to set in pool configuration. poolName \"\" Pool name to set in pool configuration. sourceBranch \"refs/heads/master\" Source branch to limit image builds to. dockerfilePath \"./Dockerfile\" Path to Dockerfile used in build. dockerBuildArgs \"\" Additional build args to append when building docker image. serviceName \"\" Name of application or service, will also be the name of the image. preBuild [] Steps to run before Docker build, takes a list of steps. postBuild [] Steps to run after Docker build, takes a list of steps. dockerLint.enable true Enable running Docker lint step. dockerLint.ignoreRuleViolations true Continues if any Docker lint violations occur. imageScan.enable true Enable running Image scan step. imageScan.ignoreRuleViolations true Continues if any Image scan violations occur. binaries.hadolint.tag v.18.0 Version of hadolint to download. binaries.hadolint.sha f9bc9de12438b463ca84e77fde70b07b155d4da07ca21bc3f4354a62c6199db4 SHA sum to verify downloaded hadolint binary with. binaries.trivy.tag `v0.12.0 Version of trivy to download. binaries.trivy.sha 4003d993d4b6b5673d4ef6e216578e8ac2bf6b439201a8e748a75fc68430c3f5 SHA sum to verify downloaded trivy archive with.","title":"Build"},{"location":"azure-devops-templates/gitops/#deploy","text":"Name Default Description poolNameTemplate \"\" Name of pool to use in template format. sourceBranch \"refs/heads/master\" Source branch to limit image builds to. serviceName \"\" Name of the service, should match service name in build. azureSubscriptionTemplate \"\" Name of Azure subscription in template format. acrNameTemplate \"\" Name of ACr to use in template format. imagePathPrefix \"\" Prefix to append to image name before pushing to ACR. environments [{name: dev, deployTags: false}, {name: qa, deployTags: true}, {name: prod, deployTags: true}] Environments that should be deployed to.","title":"Deploy"},{"location":"azure-devops-templates/gitops/#examples","text":"Build name: $(Build.BuildId) trigger: batch: true branches: include: - master tags: include: - \"*\" paths: include: - \"*\" resources: repositories: - repository: templates type: git name: XenitKubernetesService/azure-devops-templates ref: refs/tags/2020.10.0 stages: - template: gitops/build/main.yaml@templates parameters: serviceName: \"podinfo\" Deploy name: $(Build.BuildId) trigger: none resources: repositories: - repository: templates type: git name: XenitKubernetesService/azure-devops-templates ref: refs/tags/2020.10.2 pipelines: - pipeline: ciPipeline source: ci-podinfo trigger: stages: - cd_trigger # Stage will only trigger if the build reason isn't pull request stages: - template: gitops/deploy/main.yaml@templates parameters: poolNameTemplate: \"xks-{0}\" serviceName: \"podinfo\" azureSubscriptionTemplate: \"azure-{0}-lab-contributor\" acrNameTemplate: \"acr{0}wexks\" imagePathPrefix: \"lab\" imageTagPath: \".spec.values.application.buildId\" environments: - name: dev deployTags: false","title":"Examples"},{"location":"azure-devops-templates/packer/","text":"packer The packer templates are meant to be used to build VM images in Azure. Template Format Parameter names that end with Template will be templated before they are used. They are templted with the format command . The format command is passed the environment name, which can be placed in the string. Build Name Default Description poolNameTemplate \"\" Pool name template. poolVmImage \"ubuntu-18.04\" Pool vm image (only used if poolNameTemplate is empty) azureSubscriptionTemplate \"\" Azure subscription name template. resourceGroupTemplate \"\" Azure resource group name template. packerTemplateRepo \"https://github.com/XenitAB/cloud-automation.git\" GIT repository to use for packer template. packerTemplateRepoBranch \"master\" GIT branch to use for packer template repository. packerTemplateFile \"\" Location (inside of packerTemplateRepo) of the packer template. preBuild [] Steps to run before Docker build, takes a list of steps. postBuild [] Steps to run after Docker build, takes a list of steps. binaries.packer.tag \"1.6.5\" Packer binary version. binaries.packer.sha \"a49f6408a50c220fe3f1a6192ea21134e2e8f31092c507614cd27ad4f913234b\" Packer binary sha. Examples Build name: $(Build.BuildId) trigger: none resources: repositories: - repository: templates type: git name: XenitKubernetesService/azure-devops-templates ref: refs/tags/2020.11.9 stages: - template: packer/main.yaml@templates parameters: poolNameTemplate: \"xks-{0}\" azureSubscriptionTemplate: \"azure-{0}-contributor\" resourceGroupTemplate: \"rg-{0}-we-packer\" packerTemplateRepo: \"https://github.com/XenitAB/cloud-automation.git\" packerTemplateRepoBranch: \"2020.11.2\" packerTemplateFile: \"azure/packer/azure-pipelines-agent/ubuntu1804.json\"","title":"packer"},{"location":"azure-devops-templates/packer/#packer","text":"The packer templates are meant to be used to build VM images in Azure.","title":"packer"},{"location":"azure-devops-templates/packer/#template-format","text":"Parameter names that end with Template will be templated before they are used. They are templted with the format command . The format command is passed the environment name, which can be placed in the string.","title":"Template Format"},{"location":"azure-devops-templates/packer/#build","text":"Name Default Description poolNameTemplate \"\" Pool name template. poolVmImage \"ubuntu-18.04\" Pool vm image (only used if poolNameTemplate is empty) azureSubscriptionTemplate \"\" Azure subscription name template. resourceGroupTemplate \"\" Azure resource group name template. packerTemplateRepo \"https://github.com/XenitAB/cloud-automation.git\" GIT repository to use for packer template. packerTemplateRepoBranch \"master\" GIT branch to use for packer template repository. packerTemplateFile \"\" Location (inside of packerTemplateRepo) of the packer template. preBuild [] Steps to run before Docker build, takes a list of steps. postBuild [] Steps to run after Docker build, takes a list of steps. binaries.packer.tag \"1.6.5\" Packer binary version. binaries.packer.sha \"a49f6408a50c220fe3f1a6192ea21134e2e8f31092c507614cd27ad4f913234b\" Packer binary sha.","title":"Build"},{"location":"azure-devops-templates/packer/#examples","text":"Build name: $(Build.BuildId) trigger: none resources: repositories: - repository: templates type: git name: XenitKubernetesService/azure-devops-templates ref: refs/tags/2020.11.9 stages: - template: packer/main.yaml@templates parameters: poolNameTemplate: \"xks-{0}\" azureSubscriptionTemplate: \"azure-{0}-contributor\" resourceGroupTemplate: \"rg-{0}-we-packer\" packerTemplateRepo: \"https://github.com/XenitAB/cloud-automation.git\" packerTemplateRepoBranch: \"2020.11.2\" packerTemplateFile: \"azure/packer/azure-pipelines-agent/ubuntu1804.json\"","title":"Examples"},{"location":"azure-devops-templates/terraform/","text":"Terraform The Terraform templates are used to run Terraform in a dev->qa->prod environment promotion flow. Architecture Template Format Parameter names that end with Template will be templated before they are used. They are templted with the format command . The format command is passed the environment name, which can be placed in the string. Plan Name Default Description poolNameTemplate \"\" Name of pool to use in template format. sourceBranch \"refs/heads/master\" Source branch to limit image builds to. terraformLint.enable true Enable running Terraform lint step. terraformLint.ignoreRuleViolations true Continues if any Terraform lint violations occur. binaries.tflint.tag v0.20.3 Version of tflint to download. binaries.tflint.sha e993129a256a8c4303bf883e973a922f63160b6e8b7ab0bb4d33bb0f87b00db2 SHA sum to verify downloaded tflint binary with. environments [{name: dev}, {name: qa}, {name: prod}] Environments that should be deployed to. azureSubscriptionTemplate \"\" Name of Azure subscription in template format. terraformVersion 0.13.4 Version of Terraform to use. terraformFolder \"\" Path to Terraform directory. opaBlastRadius 50 Highest allowable blast radius when running plan. Apply Name Default Description poolNameTemplate \"\" Name of pool to use in template format. sourceBranch \"refs/heads/master\" Source branch to limit image builds to. azureSubscriptionTemplate \"\" Name of Azure subscription in template format. terraformVersion 0.13.4 Version of Terraform to use. terraformFolder \"\" Path to Terraform directory. environments [{name: dev, deployTags: false}, {name: qa, deployTags: true}, {name: prod, deployTags: true}] Environments that should be deployed to. Examples name: $(Build.BuildId) trigger: batch: true branches: include: - master paths: include: - TF resources: repositories: - repository: templates type: git name: PROJ/azure-devops-templates ref: resf/tags/2020.11.0 stages: - template: terraform/plan/main.yaml@templates parameters: azureSubscriptionTemplate: \"SUB\" poolNameTemplate: \"POOL\" terraformFolder: \"TF\" - template: terraform/apply/main.yaml@templates parameters: azureSubscriptionTemplate: \"SUB\" poolNameTemplate: \"POOL\" terraformFolder: \"TF\"","title":"Terraform"},{"location":"azure-devops-templates/terraform/#terraform","text":"The Terraform templates are used to run Terraform in a dev->qa->prod environment promotion flow.","title":"Terraform"},{"location":"azure-devops-templates/terraform/#architecture","text":"","title":"Architecture"},{"location":"azure-devops-templates/terraform/#template-format","text":"Parameter names that end with Template will be templated before they are used. They are templted with the format command . The format command is passed the environment name, which can be placed in the string.","title":"Template Format"},{"location":"azure-devops-templates/terraform/#plan","text":"Name Default Description poolNameTemplate \"\" Name of pool to use in template format. sourceBranch \"refs/heads/master\" Source branch to limit image builds to. terraformLint.enable true Enable running Terraform lint step. terraformLint.ignoreRuleViolations true Continues if any Terraform lint violations occur. binaries.tflint.tag v0.20.3 Version of tflint to download. binaries.tflint.sha e993129a256a8c4303bf883e973a922f63160b6e8b7ab0bb4d33bb0f87b00db2 SHA sum to verify downloaded tflint binary with. environments [{name: dev}, {name: qa}, {name: prod}] Environments that should be deployed to. azureSubscriptionTemplate \"\" Name of Azure subscription in template format. terraformVersion 0.13.4 Version of Terraform to use. terraformFolder \"\" Path to Terraform directory. opaBlastRadius 50 Highest allowable blast radius when running plan.","title":"Plan"},{"location":"azure-devops-templates/terraform/#apply","text":"Name Default Description poolNameTemplate \"\" Name of pool to use in template format. sourceBranch \"refs/heads/master\" Source branch to limit image builds to. azureSubscriptionTemplate \"\" Name of Azure subscription in template format. terraformVersion 0.13.4 Version of Terraform to use. terraformFolder \"\" Path to Terraform directory. environments [{name: dev, deployTags: false}, {name: qa, deployTags: true}, {name: prod, deployTags: true}] Environments that should be deployed to.","title":"Apply"},{"location":"azure-devops-templates/terraform/#examples","text":"name: $(Build.BuildId) trigger: batch: true branches: include: - master paths: include: - TF resources: repositories: - repository: templates type: git name: PROJ/azure-devops-templates ref: resf/tags/2020.11.0 stages: - template: terraform/plan/main.yaml@templates parameters: azureSubscriptionTemplate: \"SUB\" poolNameTemplate: \"POOL\" terraformFolder: \"TF\" - template: terraform/apply/main.yaml@templates parameters: azureSubscriptionTemplate: \"SUB\" poolNameTemplate: \"POOL\" terraformFolder: \"TF\"","title":"Examples"},{"location":"terraform-modules/","text":"terraform-modules Xenit Terraform modules","title":"terraform-modules"},{"location":"terraform-modules/#terraform-modules","text":"Xenit Terraform modules","title":"terraform-modules"},{"location":"terraform-modules/modules/azure/aks-global/","text":"Azure Kubernetes Service - Global This module is used to create resources that are used by AKS clusters. Requirements Name Version terraform 0.13.5 azuread 1.0.0 azurerm 2.35.0 random 3.0.0 tls 3.0.0 Providers Name Version azuread 1.0.0 azurerm 2.35.0 random 3.0.0 tls 3.0.0 Inputs Name Description Type Default Required aks_authorized_ips Authorized IPs to access AKS API list(string) n/a yes core_name The name for the core infrastructure string n/a yes dns_zone The DNS Zone to create string n/a yes environment The environment name to use for the deploy string n/a yes location_short The Azure region short name. string n/a yes name The name to use for the deploy string n/a yes namespaces The namespaces that should be created in Kubernetes. list( object({ name = string delegate_resource_group = bool labels = map(string) flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes public_ip_prefix_configuration Configuration for public ip prefix object({ count = number prefix_length = number }) { \"count\": 2, \"prefix_length\": 30 } no subscription_name The commonName for the subscription string n/a yes Outputs Name Description aad_groups Azure AD groups aad_pod_identity aad-pod-identity user assigned identities acr_name Azure Container Registry Name aks_authorized_ips IP addresses authorized for API communication to Azure Kubernetes Service aks_public_ip_prefix_ids Azure Kubernetes Service IP Prefixes dns_zone DNS Zone to be used with external-dns external_dns_identity MSI authentication identity for External DNS helm_operator_credentials Credentials meant to be used by Helm Operator namespaces Kubernetes namespaces ssh_public_key SSH public key to add to servers velero Velero configuration","title":"Azure Kubernetes Service - Global"},{"location":"terraform-modules/modules/azure/aks-global/#azure-kubernetes-service-global","text":"This module is used to create resources that are used by AKS clusters.","title":"Azure Kubernetes Service - Global"},{"location":"terraform-modules/modules/azure/aks-global/#requirements","text":"Name Version terraform 0.13.5 azuread 1.0.0 azurerm 2.35.0 random 3.0.0 tls 3.0.0","title":"Requirements"},{"location":"terraform-modules/modules/azure/aks-global/#providers","text":"Name Version azuread 1.0.0 azurerm 2.35.0 random 3.0.0 tls 3.0.0","title":"Providers"},{"location":"terraform-modules/modules/azure/aks-global/#inputs","text":"Name Description Type Default Required aks_authorized_ips Authorized IPs to access AKS API list(string) n/a yes core_name The name for the core infrastructure string n/a yes dns_zone The DNS Zone to create string n/a yes environment The environment name to use for the deploy string n/a yes location_short The Azure region short name. string n/a yes name The name to use for the deploy string n/a yes namespaces The namespaces that should be created in Kubernetes. list( object({ name = string delegate_resource_group = bool labels = map(string) flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes public_ip_prefix_configuration Configuration for public ip prefix object({ count = number prefix_length = number }) { \"count\": 2, \"prefix_length\": 30 } no subscription_name The commonName for the subscription string n/a yes","title":"Inputs"},{"location":"terraform-modules/modules/azure/aks-global/#outputs","text":"Name Description aad_groups Azure AD groups aad_pod_identity aad-pod-identity user assigned identities acr_name Azure Container Registry Name aks_authorized_ips IP addresses authorized for API communication to Azure Kubernetes Service aks_public_ip_prefix_ids Azure Kubernetes Service IP Prefixes dns_zone DNS Zone to be used with external-dns external_dns_identity MSI authentication identity for External DNS helm_operator_credentials Credentials meant to be used by Helm Operator namespaces Kubernetes namespaces ssh_public_key SSH public key to add to servers velero Velero configuration","title":"Outputs"},{"location":"terraform-modules/modules/azure/aks/","text":"Azure Kubernetes Service This module is used to create AKS clusters. Requirements Name Version terraform 0.13.5 azuread 1.0.0 azuredevops 0.2.1 azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3 random 3.0.0 Providers Name Version azuread 1.0.0 azurerm 2.35.0 kubernetes 1.13.3 Inputs Name Description Type Default Required aad_groups Configuration for aad groups object({ view = map(any) edit = map(any) cluster_admin = object({ id = string name = string }) cluster_view = object({ id = string name = string }) aks_managed_identity = object({ id = string name = string }) }) n/a yes aad_pod_identity Configuration for aad pod identity map(object({ id = string client_id = string })) n/a yes aad_pod_identity_enabled Should aad-pod-identity be enabled bool true no aks_authorized_ips Authorized IPs to access AKS API list(string) n/a yes aks_config The Azure Kubernetes Service (AKS) configuration object({ kubernetes_version = string sku_tier = string default_node_pool = object({ orchestrator_version = string vm_size = string min_count = number max_count = number node_labels = map(string) }) additional_node_pools = list(object({ name = string orchestrator_version = string vm_size = string min_count = number max_count = number node_taints = list(string) node_labels = map(string) })) }) n/a yes aks_name_suffix The suffix for the aks clusters number 1 no aks_public_ip_prefix_id Public IP ID AKS egresses from string n/a yes azure_devops_organization Azure Devops organization root string \"\" no azure_devops_project Azure Devops project root string \"\" no cert_manager_enabled Should Cert Manager be enabled bool true no core_name The commonName for the core infrastructure string n/a yes environment The environment name to use for the deploy string n/a yes external_dns_enabled Should External DNS be enabled bool true no external_dns_identity External DNS identity information object({ client_id = string resource_id = string }) n/a yes fluxcd_v2_enabled Should fluxcd-v2 be enabled bool true no ingress_nginx_enabled Should Ingress NGINX be enabled bool true no kubernetes_network_policy_default_deny Should a network policy be created in each group namespace that disables traffic from other namespaces bool true no location_short The Azure region short name. string n/a yes name The commonName to use for the deploy string n/a yes namespaces The namespaces that should be created in Kubernetes. list( object({ name = string delegate_resource_group = bool labels = map(string) flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes opa_gatekeeper_enabled Should OPA Gatekeeper be enabled bool true no ssh_public_key SSH public key to add to servers string n/a yes velero Velero configuration object({ azure_storage_account_name = string azure_storage_account_container = string identity = object({ client_id = string resource_id = string }) }) n/a yes velero_enabled Should Velero be enabled bool false no Outputs No output.","title":"Azure Kubernetes Service"},{"location":"terraform-modules/modules/azure/aks/#azure-kubernetes-service","text":"This module is used to create AKS clusters.","title":"Azure Kubernetes Service"},{"location":"terraform-modules/modules/azure/aks/#requirements","text":"Name Version terraform 0.13.5 azuread 1.0.0 azuredevops 0.2.1 azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3 random 3.0.0","title":"Requirements"},{"location":"terraform-modules/modules/azure/aks/#providers","text":"Name Version azuread 1.0.0 azurerm 2.35.0 kubernetes 1.13.3","title":"Providers"},{"location":"terraform-modules/modules/azure/aks/#inputs","text":"Name Description Type Default Required aad_groups Configuration for aad groups object({ view = map(any) edit = map(any) cluster_admin = object({ id = string name = string }) cluster_view = object({ id = string name = string }) aks_managed_identity = object({ id = string name = string }) }) n/a yes aad_pod_identity Configuration for aad pod identity map(object({ id = string client_id = string })) n/a yes aad_pod_identity_enabled Should aad-pod-identity be enabled bool true no aks_authorized_ips Authorized IPs to access AKS API list(string) n/a yes aks_config The Azure Kubernetes Service (AKS) configuration object({ kubernetes_version = string sku_tier = string default_node_pool = object({ orchestrator_version = string vm_size = string min_count = number max_count = number node_labels = map(string) }) additional_node_pools = list(object({ name = string orchestrator_version = string vm_size = string min_count = number max_count = number node_taints = list(string) node_labels = map(string) })) }) n/a yes aks_name_suffix The suffix for the aks clusters number 1 no aks_public_ip_prefix_id Public IP ID AKS egresses from string n/a yes azure_devops_organization Azure Devops organization root string \"\" no azure_devops_project Azure Devops project root string \"\" no cert_manager_enabled Should Cert Manager be enabled bool true no core_name The commonName for the core infrastructure string n/a yes environment The environment name to use for the deploy string n/a yes external_dns_enabled Should External DNS be enabled bool true no external_dns_identity External DNS identity information object({ client_id = string resource_id = string }) n/a yes fluxcd_v2_enabled Should fluxcd-v2 be enabled bool true no ingress_nginx_enabled Should Ingress NGINX be enabled bool true no kubernetes_network_policy_default_deny Should a network policy be created in each group namespace that disables traffic from other namespaces bool true no location_short The Azure region short name. string n/a yes name The commonName to use for the deploy string n/a yes namespaces The namespaces that should be created in Kubernetes. list( object({ name = string delegate_resource_group = bool labels = map(string) flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes opa_gatekeeper_enabled Should OPA Gatekeeper be enabled bool true no ssh_public_key SSH public key to add to servers string n/a yes velero Velero configuration object({ azure_storage_account_name = string azure_storage_account_container = string identity = object({ client_id = string resource_id = string }) }) n/a yes velero_enabled Should Velero be enabled bool false no","title":"Inputs"},{"location":"terraform-modules/modules/azure/aks/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/azure/azure-pipelines-agent-vmss/","text":"Azure Pipelines Agent This is the setup for Azure Pipelines Agent Virtual Machine Scale Set (VMSS). Azure DevOps Configuration Follow this guide to setup the agent pool (manually): https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/scale-set-agents?view=azure-devops#create-the-scale-set-agent-pool Requirements Name Version terraform 0.13.5 azurerm 2.35.0 tls 3.0.0 Providers Name Version azurerm 2.35.0 tls 3.0.0 Inputs Name Description Type Default Required azure_pipelines_agent_image_name The Azure Pipelines agent image name string n/a yes azure_pipelines_agent_image_resource_group_name The Azure Pipelines agent image resource group name string \"\" no environment The environment (short name) to use for the deploy string n/a yes keyvault_name The keyvault name string \"\" no keyvault_resource_group_name The keyvault resource group name string \"\" no location_short The location (short name) for the region string n/a yes name The commonName to use for the deploy string n/a yes resource_group_name The resource group name string \"\" no vmss_admin_username The admin username string \"azpagent\" no vmss_disk_size_gb The disk size (in GB) for the VMSS instances number 128 no vmss_instances The number of instances number 1 no vmss_sku The sku for VMSS instances string \"Standard_F4s_v2\" no vmss_subnet_config The subnet configuration for the VMSS instances object({ name = string virtual_network_name = string resource_group_name = string }) n/a yes vmss_zones The zones to place the VMSS instances list(string) [ \"1\", \"2\", \"3\" ] no Outputs No output.","title":"Azure Pipelines Agent"},{"location":"terraform-modules/modules/azure/azure-pipelines-agent-vmss/#azure-pipelines-agent","text":"This is the setup for Azure Pipelines Agent Virtual Machine Scale Set (VMSS).","title":"Azure Pipelines Agent"},{"location":"terraform-modules/modules/azure/azure-pipelines-agent-vmss/#azure-devops-configuration","text":"Follow this guide to setup the agent pool (manually): https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/scale-set-agents?view=azure-devops#create-the-scale-set-agent-pool","title":"Azure DevOps Configuration"},{"location":"terraform-modules/modules/azure/azure-pipelines-agent-vmss/#requirements","text":"Name Version terraform 0.13.5 azurerm 2.35.0 tls 3.0.0","title":"Requirements"},{"location":"terraform-modules/modules/azure/azure-pipelines-agent-vmss/#providers","text":"Name Version azurerm 2.35.0 tls 3.0.0","title":"Providers"},{"location":"terraform-modules/modules/azure/azure-pipelines-agent-vmss/#inputs","text":"Name Description Type Default Required azure_pipelines_agent_image_name The Azure Pipelines agent image name string n/a yes azure_pipelines_agent_image_resource_group_name The Azure Pipelines agent image resource group name string \"\" no environment The environment (short name) to use for the deploy string n/a yes keyvault_name The keyvault name string \"\" no keyvault_resource_group_name The keyvault resource group name string \"\" no location_short The location (short name) for the region string n/a yes name The commonName to use for the deploy string n/a yes resource_group_name The resource group name string \"\" no vmss_admin_username The admin username string \"azpagent\" no vmss_disk_size_gb The disk size (in GB) for the VMSS instances number 128 no vmss_instances The number of instances number 1 no vmss_sku The sku for VMSS instances string \"Standard_F4s_v2\" no vmss_subnet_config The subnet configuration for the VMSS instances object({ name = string virtual_network_name = string resource_group_name = string }) n/a yes vmss_zones The zones to place the VMSS instances list(string) [ \"1\", \"2\", \"3\" ] no","title":"Inputs"},{"location":"terraform-modules/modules/azure/azure-pipelines-agent-vmss/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/azure/core/","text":"Core This module is used to create core resources like virtual network for the subscription. Requirements Name Version terraform 0.13.5 azuread 1.0.0 azurerm 2.35.0 Providers Name Version azuread 1.0.0 azurerm 2.35.0 Inputs Name Description Type Default Required environment The environment name to use for the deploy string n/a yes name The commonName to use for the deploy string n/a yes peering_config Peering configuration map(list(object({ name = string remote_virtual_network_id = string allow_forwarded_traffic = bool use_remote_gateways = bool allow_virtual_network_access = bool }))) {} no regions The Azure Regions to configure list(object({ location = string location_short = string })) n/a yes subscription_name The subscriptionCommonName to use for the deploy string n/a yes vnet_config Address spaces used by virtual network. map(object({ address_space = list(string) subnets = list(object({ name = string cidr = string service_endpoints = list(string) aks_subnet = bool })) })) n/a yes Outputs No output.","title":"Core"},{"location":"terraform-modules/modules/azure/core/#core","text":"This module is used to create core resources like virtual network for the subscription.","title":"Core"},{"location":"terraform-modules/modules/azure/core/#requirements","text":"Name Version terraform 0.13.5 azuread 1.0.0 azurerm 2.35.0","title":"Requirements"},{"location":"terraform-modules/modules/azure/core/#providers","text":"Name Version azuread 1.0.0 azurerm 2.35.0","title":"Providers"},{"location":"terraform-modules/modules/azure/core/#inputs","text":"Name Description Type Default Required environment The environment name to use for the deploy string n/a yes name The commonName to use for the deploy string n/a yes peering_config Peering configuration map(list(object({ name = string remote_virtual_network_id = string allow_forwarded_traffic = bool use_remote_gateways = bool allow_virtual_network_access = bool }))) {} no regions The Azure Regions to configure list(object({ location = string location_short = string })) n/a yes subscription_name The subscriptionCommonName to use for the deploy string n/a yes vnet_config Address spaces used by virtual network. map(object({ address_space = list(string) subnets = list(object({ name = string cidr = string service_endpoints = list(string) aks_subnet = bool })) })) n/a yes","title":"Inputs"},{"location":"terraform-modules/modules/azure/core/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/azure/governance/","text":"Governance This module is used to create resource groups, service principals, Azure AD groups, Azure KeyVaults and delegation to all of those resources. Requirements Name Version terraform 0.13.5 azuread 1.0.0 azurerm 2.35.0 random 3.0.0 Providers Name Version azuread 1.0.0 azurerm 2.35.0 random 3.0.0 Inputs Name Description Type Default Required core_name The commonName for the core infra string n/a yes environment The environment name to use for the deploy string n/a yes owner_service_principal_name The name of the service principal that will be used to run terraform and is owner of the subsciptions string n/a yes regions The Azure Regions to configure list(object({ location = string location_short = string })) n/a yes resource_group_configs Resource group configuration list( object({ common_name = string delegate_aks = bool # Delegate aks permissions delegate_key_vault = bool # Delegate KeyVault creation delegate_service_endpoint = bool # Delegate Service Endpoint permissions delegate_service_principal = bool # Delegate Service Principal tags = map(string) }) ) n/a yes subscription_name The commonName for the subscription string n/a yes Outputs No output.","title":"Governance"},{"location":"terraform-modules/modules/azure/governance/#governance","text":"This module is used to create resource groups, service principals, Azure AD groups, Azure KeyVaults and delegation to all of those resources.","title":"Governance"},{"location":"terraform-modules/modules/azure/governance/#requirements","text":"Name Version terraform 0.13.5 azuread 1.0.0 azurerm 2.35.0 random 3.0.0","title":"Requirements"},{"location":"terraform-modules/modules/azure/governance/#providers","text":"Name Version azuread 1.0.0 azurerm 2.35.0 random 3.0.0","title":"Providers"},{"location":"terraform-modules/modules/azure/governance/#inputs","text":"Name Description Type Default Required core_name The commonName for the core infra string n/a yes environment The environment name to use for the deploy string n/a yes owner_service_principal_name The name of the service principal that will be used to run terraform and is owner of the subsciptions string n/a yes regions The Azure Regions to configure list(object({ location = string location_short = string })) n/a yes resource_group_configs Resource group configuration list( object({ common_name = string delegate_aks = bool # Delegate aks permissions delegate_key_vault = bool # Delegate KeyVault creation delegate_service_endpoint = bool # Delegate Service Endpoint permissions delegate_service_principal = bool # Delegate Service Principal tags = map(string) }) ) n/a yes subscription_name The commonName for the subscription string n/a yes","title":"Inputs"},{"location":"terraform-modules/modules/azure/governance/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/azure/hub/","text":"Hub This module is used to create a separate network in one of the subscriptions (usually PROD) and connect it to all the networks. Usage Use together with the core module to create a peered network where SPOF (single point of failure) resources can be created, lik Azure Pipelines Agent Virtual Machine Scale Set (VMSS). Requirements Name Version terraform 0.13.5 azurerm 2.35.0 Providers Name Version azurerm 2.35.0 Inputs Name Description Type Default Required environment The environment (short name) to use for the deploy string n/a yes name The name to use for the deploy string n/a yes nat_gateway_public_ip_prefix_length The Public IP Prefix length for NAT Gateway number 31 no peering_config Peering configuration map(list(object({ name = string remote_virtual_network_id = string allow_forwarded_traffic = bool use_remote_gateways = bool allow_virtual_network_access = bool }))) {} no regions The Azure Regions to configure list(object({ location = string location_short = string })) n/a yes vnet_config Address spaces used by virtual network. map(object({ address_space = list(string) subnets = list(object({ name = string cidr = string service_endpoints = list(string) })) })) n/a yes Outputs Name Description public_ip_prefixes Public IP prefix information resource_groups Resource group information subnets Subnet information virtual_networks Virtual network information","title":"Hub"},{"location":"terraform-modules/modules/azure/hub/#hub","text":"This module is used to create a separate network in one of the subscriptions (usually PROD) and connect it to all the networks.","title":"Hub"},{"location":"terraform-modules/modules/azure/hub/#usage","text":"Use together with the core module to create a peered network where SPOF (single point of failure) resources can be created, lik Azure Pipelines Agent Virtual Machine Scale Set (VMSS).","title":"Usage"},{"location":"terraform-modules/modules/azure/hub/#requirements","text":"Name Version terraform 0.13.5 azurerm 2.35.0","title":"Requirements"},{"location":"terraform-modules/modules/azure/hub/#providers","text":"Name Version azurerm 2.35.0","title":"Providers"},{"location":"terraform-modules/modules/azure/hub/#inputs","text":"Name Description Type Default Required environment The environment (short name) to use for the deploy string n/a yes name The name to use for the deploy string n/a yes nat_gateway_public_ip_prefix_length The Public IP Prefix length for NAT Gateway number 31 no peering_config Peering configuration map(list(object({ name = string remote_virtual_network_id = string allow_forwarded_traffic = bool use_remote_gateways = bool allow_virtual_network_access = bool }))) {} no regions The Azure Regions to configure list(object({ location = string location_short = string })) n/a yes vnet_config Address spaces used by virtual network. map(object({ address_space = list(string) subnets = list(object({ name = string cidr = string service_endpoints = list(string) })) })) n/a yes","title":"Inputs"},{"location":"terraform-modules/modules/azure/hub/#outputs","text":"Name Description public_ip_prefixes Public IP prefix information resource_groups Resource group information subnets Subnet information virtual_networks Virtual network information","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/aad-pod-identity/","text":"Azure AD POD Identity (AAD-POD-Identity) This module is used to add aad-pod-identity to Kubernetes clusters (tested with AKS). Requirements Name Version terraform 0.13.5 helm 1.3.2 Providers Name Version helm 1.3.2 Inputs Name Description Type Default Required aad_pod_identity Configuration for aad pod identity map(object({ id = string client_id = string })) n/a yes namespaces Namespaces to create AzureIdentity and AzureIdentityBindings in. list( object({ name = string }) ) n/a yes Outputs No output.","title":"Azure AD POD Identity (AAD-POD-Identity)"},{"location":"terraform-modules/modules/kubernetes/aad-pod-identity/#azure-ad-pod-identity-aad-pod-identity","text":"This module is used to add aad-pod-identity to Kubernetes clusters (tested with AKS).","title":"Azure AD POD Identity (AAD-POD-Identity)"},{"location":"terraform-modules/modules/kubernetes/aad-pod-identity/#requirements","text":"Name Version terraform 0.13.5 helm 1.3.2","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/aad-pod-identity/#providers","text":"Name Version helm 1.3.2","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/aad-pod-identity/#inputs","text":"Name Description Type Default Required aad_pod_identity Configuration for aad pod identity map(object({ id = string client_id = string })) n/a yes namespaces Namespaces to create AzureIdentity and AzureIdentityBindings in. list( object({ name = string }) ) n/a yes","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/aad-pod-identity/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/azdo-proxy/","text":"Azure DevOps Proxy (azdo-proxy) This module is used to add azdo-proxy to Kubernetes clusters. Details Azure DevOps Proxy is used to grant convert a single Azure DevOps PAT (Personal Access Token) to a unique local secret in the cluster. This unique secret can only be used to communicate with a single repository in Azure DevOps, compared to the PAT which may have access to the whole organization. Requirements Name Version terraform 0.13.5 azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3 random 3.0.0 Providers Name Version azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3 random 3.0.0 Inputs Name Description Type Default Required azdo_proxy_config_secret_name The name of the secret storing the azdo-proxy configuration string \"azdo-proxy-config\" no azdo_proxy_helm_chart_name The helm chart name for azdo-proxy string \"azdo-proxy\" no azdo_proxy_helm_chart_version The helm chart version for azdo-proxy string \"v0.3.0\" no azdo_proxy_helm_repository The helm repository for azdo-proxy string \"https://xenitab.github.io/azdo-proxy/\" no azdo_proxy_namespace The namespace to be used by Azure DevOps Proxy string \"azdo-proxy\" no azure_devops_domain The domain of Azure DevOps string \"dev.azure.com\" no azure_devops_organization Azure Devops organization used to configure azdo-proxy string n/a yes azure_devops_pat Azure DevOps PAT (Personal Access Token) string \"\" no azure_devops_pat_keyvault Object to read Azure DevOps PAT (Personal Access Token) from Azure KeyVault object({ read_azure_devops_pat_from_azure_keyvault = bool azure_keyvault_id = string key = string }) n/a yes namespaces The namespaces that should be created in Kubernetes. list( object({ name = string flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes Outputs Name Description azdo_proxy_local_passwords The local passwords for Azure DevOps Proxy","title":"Azure DevOps Proxy (azdo-proxy)"},{"location":"terraform-modules/modules/kubernetes/azdo-proxy/#azure-devops-proxy-azdo-proxy","text":"This module is used to add azdo-proxy to Kubernetes clusters.","title":"Azure DevOps Proxy (azdo-proxy)"},{"location":"terraform-modules/modules/kubernetes/azdo-proxy/#details","text":"Azure DevOps Proxy is used to grant convert a single Azure DevOps PAT (Personal Access Token) to a unique local secret in the cluster. This unique secret can only be used to communicate with a single repository in Azure DevOps, compared to the PAT which may have access to the whole organization.","title":"Details"},{"location":"terraform-modules/modules/kubernetes/azdo-proxy/#requirements","text":"Name Version terraform 0.13.5 azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3 random 3.0.0","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/azdo-proxy/#providers","text":"Name Version azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3 random 3.0.0","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/azdo-proxy/#inputs","text":"Name Description Type Default Required azdo_proxy_config_secret_name The name of the secret storing the azdo-proxy configuration string \"azdo-proxy-config\" no azdo_proxy_helm_chart_name The helm chart name for azdo-proxy string \"azdo-proxy\" no azdo_proxy_helm_chart_version The helm chart version for azdo-proxy string \"v0.3.0\" no azdo_proxy_helm_repository The helm repository for azdo-proxy string \"https://xenitab.github.io/azdo-proxy/\" no azdo_proxy_namespace The namespace to be used by Azure DevOps Proxy string \"azdo-proxy\" no azure_devops_domain The domain of Azure DevOps string \"dev.azure.com\" no azure_devops_organization Azure Devops organization used to configure azdo-proxy string n/a yes azure_devops_pat Azure DevOps PAT (Personal Access Token) string \"\" no azure_devops_pat_keyvault Object to read Azure DevOps PAT (Personal Access Token) from Azure KeyVault object({ read_azure_devops_pat_from_azure_keyvault = bool azure_keyvault_id = string key = string }) n/a yes namespaces The namespaces that should be created in Kubernetes. list( object({ name = string flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/azdo-proxy/#outputs","text":"Name Description azdo_proxy_local_passwords The local passwords for Azure DevOps Proxy","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/cert-manager/","text":"Certificate manager (cert-manager) This module is used to add cert-manager to Kubernetes clusters. Requirements Name Version terraform 0.13.5 helm 1.3.2 Providers Name Version helm 1.3.2 Inputs Name Description Type Default Required notification_email Email address to send certificate expiration notifications string \"DG-Team-DevOps@xenit.se\" no Outputs No output.","title":"Certificate manager (cert-manager)"},{"location":"terraform-modules/modules/kubernetes/cert-manager/#certificate-manager-cert-manager","text":"This module is used to add cert-manager to Kubernetes clusters.","title":"Certificate manager (cert-manager)"},{"location":"terraform-modules/modules/kubernetes/cert-manager/#requirements","text":"Name Version terraform 0.13.5 helm 1.3.2","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/cert-manager/#providers","text":"Name Version helm 1.3.2","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/cert-manager/#inputs","text":"Name Description Type Default Required notification_email Email address to send certificate expiration notifications string \"DG-Team-DevOps@xenit.se\" no","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/cert-manager/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/external-dns/","text":"External DNS (external-dns) This module is used to add external-dns to Kubernetes clusters. Requirements Name Version terraform 0.13.5 helm 1.3.2 Providers Name Version helm 1.3.2 Inputs Name Description Type Default Required azure_client_id Client ID for MSI authentication string \"\" no azure_resource_group Azure resource group for DNS zone string \"\" no azure_resource_id Principal ID fo MSI authentication string \"\" no azure_subscription_id Azure subscription ID for DNS zone string \"\" no azure_tenant_id Azure tenant ID for DNS zone string \"\" no dns_provider DNS provider to use. string n/a yes sources k8s resource types to observe list(string) [ \"ingress\" ] no Outputs No output.","title":"External DNS (external-dns)"},{"location":"terraform-modules/modules/kubernetes/external-dns/#external-dns-external-dns","text":"This module is used to add external-dns to Kubernetes clusters.","title":"External DNS (external-dns)"},{"location":"terraform-modules/modules/kubernetes/external-dns/#requirements","text":"Name Version terraform 0.13.5 helm 1.3.2","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/external-dns/#providers","text":"Name Version helm 1.3.2","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/external-dns/#inputs","text":"Name Description Type Default Required azure_client_id Client ID for MSI authentication string \"\" no azure_resource_group Azure resource group for DNS zone string \"\" no azure_resource_id Principal ID fo MSI authentication string \"\" no azure_subscription_id Azure subscription ID for DNS zone string \"\" no azure_tenant_id Azure tenant ID for DNS zone string \"\" no dns_provider DNS provider to use. string n/a yes sources k8s resource types to observe list(string) [ \"ingress\" ] no","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/external-dns/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v1/","text":"Flux (v1) This module is used to add flux to Kubernetes clusters. Details The helm chart is added to this module to add the securityContext parameters to the pod running flux, to make sure it works with the opa-gatekeeper module. This module will create a flux instance in each namespace, and not used for fleet-wide configuration. Will be deprecated as soon as Flux v2 module is finished and tested. Requirements Name Version terraform 0.13.5 helm 1.3.2 Providers Name Version helm 1.3.2 Inputs Name Description Type Default Required azdo_proxy_enabled Should azdo-proxy integration be enabled bool true no azdo_proxy_local_passwords The passwords (per namespace) to communicate with Azure DevOps Proxy map(string) {} no fluxcd_v1_git_path The git path for fluxcd-v1 string \"\" no namespaces The namespaces that should be created in Kubernetes. list( object({ name = string flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes Outputs No output.","title":"Flux (v1)"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v1/#flux-v1","text":"This module is used to add flux to Kubernetes clusters.","title":"Flux (v1)"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v1/#details","text":"The helm chart is added to this module to add the securityContext parameters to the pod running flux, to make sure it works with the opa-gatekeeper module. This module will create a flux instance in each namespace, and not used for fleet-wide configuration. Will be deprecated as soon as Flux v2 module is finished and tested.","title":"Details"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v1/#requirements","text":"Name Version terraform 0.13.5 helm 1.3.2","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v1/#providers","text":"Name Version helm 1.3.2","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v1/#inputs","text":"Name Description Type Default Required azdo_proxy_enabled Should azdo-proxy integration be enabled bool true no azdo_proxy_local_passwords The passwords (per namespace) to communicate with Azure DevOps Proxy map(string) {} no fluxcd_v1_git_path The git path for fluxcd-v1 string \"\" no namespaces The namespaces that should be created in Kubernetes. list( object({ name = string flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v1/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v2/","text":"Flux V2 Installs and configures flux2 with Azure DevOps. The module is meant to offer a full bootstrap and confiugration of a Kubernetes cluster with Fluxv2. A \"root\" repository is created for the bootstrap configuration along with a repository per namepsace passed in the variables. The root repository will receive cluster-admin permissions in the cluster while each of the namespace repositories will be limited to their repsective namespace. The CRDs, component deployments and bootstrap configuration are both added to the Kubernetes cluster and commited to the root repository. While the namespace configuration is only comitted to the root repository and expected to be reconciled through the bootstrap configuration. Requirements Name Version terraform 0.13.5 azuredevops 0.2.1 flux 0.0.4 kubectl 1.9.1 kubernetes 1.13.3 Providers Name Version azuredevops 0.2.1 flux 0.0.4 kubectl 1.9.1 kubernetes 1.13.3 Inputs Name Description Type Default Required azdo_org Azure DevOps organization for bootstrap repository string n/a yes azdo_pat PAT to authenticate with Azure DevOps string n/a yes azdo_proj Azure DevOps project for bootstrap repository string n/a yes azdo_repo Name of repository to bootstrap from string \"fleet-infra\" no branch Path to reconcile bootstrap from string \"master\" no git_path Path to reconcile bootstrap from string n/a yes namespaces The namespaces to configure flux with list( object({ name = string flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes Outputs No output.","title":"Flux V2"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v2/#flux-v2","text":"Installs and configures flux2 with Azure DevOps. The module is meant to offer a full bootstrap and confiugration of a Kubernetes cluster with Fluxv2. A \"root\" repository is created for the bootstrap configuration along with a repository per namepsace passed in the variables. The root repository will receive cluster-admin permissions in the cluster while each of the namespace repositories will be limited to their repsective namespace. The CRDs, component deployments and bootstrap configuration are both added to the Kubernetes cluster and commited to the root repository. While the namespace configuration is only comitted to the root repository and expected to be reconciled through the bootstrap configuration.","title":"Flux V2"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v2/#requirements","text":"Name Version terraform 0.13.5 azuredevops 0.2.1 flux 0.0.4 kubectl 1.9.1 kubernetes 1.13.3","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v2/#providers","text":"Name Version azuredevops 0.2.1 flux 0.0.4 kubectl 1.9.1 kubernetes 1.13.3","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v2/#inputs","text":"Name Description Type Default Required azdo_org Azure DevOps organization for bootstrap repository string n/a yes azdo_pat PAT to authenticate with Azure DevOps string n/a yes azdo_proj Azure DevOps project for bootstrap repository string n/a yes azdo_repo Name of repository to bootstrap from string \"fleet-infra\" no branch Path to reconcile bootstrap from string \"master\" no git_path Path to reconcile bootstrap from string n/a yes namespaces The namespaces to configure flux with list( object({ name = string flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/fluxcd-v2/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/helm-operator/","text":"Helm Operator (helm-operator) This module is used to add helm-operator to Kubernetes clusters. Details This module will create a helm-operator instance in each namespace, and not used for fleet-wide configuration. Will be deprecated as soon as Flux v2 module is finished and tested. Requirements Name Version terraform 0.13.5 helm 1.3.2 Providers Name Version helm 1.3.2 Inputs Name Description Type Default Required acr_name Name of ACR registry to use for cluster string n/a yes azdo_proxy_enabled Should azdo-proxy integration be enabled bool true no azdo_proxy_local_passwords The passwords (per namespace) to communicate with Azure DevOps Proxy map(string) {} no helm_operator_credentials ACR credentials pased to Helm Operator object({ client_id = string secret = string }) n/a yes namespaces The namespaces that should be created in Kubernetes. list( object({ name = string flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes Outputs No output.","title":"Helm Operator (helm-operator)"},{"location":"terraform-modules/modules/kubernetes/helm-operator/#helm-operator-helm-operator","text":"This module is used to add helm-operator to Kubernetes clusters.","title":"Helm Operator (helm-operator)"},{"location":"terraform-modules/modules/kubernetes/helm-operator/#details","text":"This module will create a helm-operator instance in each namespace, and not used for fleet-wide configuration. Will be deprecated as soon as Flux v2 module is finished and tested.","title":"Details"},{"location":"terraform-modules/modules/kubernetes/helm-operator/#requirements","text":"Name Version terraform 0.13.5 helm 1.3.2","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/helm-operator/#providers","text":"Name Version helm 1.3.2","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/helm-operator/#inputs","text":"Name Description Type Default Required acr_name Name of ACR registry to use for cluster string n/a yes azdo_proxy_enabled Should azdo-proxy integration be enabled bool true no azdo_proxy_local_passwords The passwords (per namespace) to communicate with Azure DevOps Proxy map(string) {} no helm_operator_credentials ACR credentials pased to Helm Operator object({ client_id = string secret = string }) n/a yes namespaces The namespaces that should be created in Kubernetes. list( object({ name = string flux = object({ enabled = bool azdo_org = string azdo_project = string azdo_repo = string }) }) ) n/a yes","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/helm-operator/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/ingress-nginx/","text":"Ingress NGINX (ingress-nginx) This module is used to add ingress-nginx to Kubernetes clusters. Requirements Name Version terraform 0.13.5 helm 1.3.2 Providers Name Version helm 1.3.2 Inputs No input. Outputs No output.","title":"Ingress NGINX (ingress-nginx)"},{"location":"terraform-modules/modules/kubernetes/ingress-nginx/#ingress-nginx-ingress-nginx","text":"This module is used to add ingress-nginx to Kubernetes clusters.","title":"Ingress NGINX (ingress-nginx)"},{"location":"terraform-modules/modules/kubernetes/ingress-nginx/#requirements","text":"Name Version terraform 0.13.5 helm 1.3.2","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/ingress-nginx/#providers","text":"Name Version helm 1.3.2","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/ingress-nginx/#inputs","text":"No input.","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/ingress-nginx/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/loki/","text":"Grafana Loki This module is used to add loki to Kubernetes clusters (tested with AKS). Details This module will also add minio (S3 Gateway to Azure Storage Account), fluent-bit and grafana . Requirements Name Version terraform 0.13.5 azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3 Providers Name Version azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3 Inputs Name Description Type Default Required environment The environment (short name) to use for the deploy string n/a yes kubernetes_namespace_name The Kubernetes namespace name string \"loki\" no location_short The Azure region short name. string n/a yes loki_helm_chart_name The helm chart name for loki string \"loki-stack\" no loki_helm_chart_version The helm chart version for loki string \"2.0.0\" no loki_helm_release_name The helm release name for loki string \"loki\" no loki_helm_repository The helm repository for loki string \"https://grafana.github.io/loki/charts\" no minio_helm_chart_name The helm chart name for minio string \"minio\" no minio_helm_chart_version The helm chart version for minio string \"8.0.0\" no minio_helm_release_name The helm release name for minio string \"loki-minio\" no minio_helm_repository The helm repository for minio string \"https://helm.min.io/\" no name The name to use for the deploy string n/a yes resource_group_name The resource group name string \"\" no storage_account_configuration The storage account configuration object({ account_tier = string account_replication_type = string account_kind = string }) { \"account_kind\": \"StorageV2\", \"account_replication_type\": \"GRS\", \"account_tier\": \"Standard\" } no storage_account_name The storage account name string \"\" no storage_container_name The storage container name string \"loki\" no Outputs No output.","title":"Grafana Loki"},{"location":"terraform-modules/modules/kubernetes/loki/#grafana-loki","text":"This module is used to add loki to Kubernetes clusters (tested with AKS).","title":"Grafana Loki"},{"location":"terraform-modules/modules/kubernetes/loki/#details","text":"This module will also add minio (S3 Gateway to Azure Storage Account), fluent-bit and grafana .","title":"Details"},{"location":"terraform-modules/modules/kubernetes/loki/#requirements","text":"Name Version terraform 0.13.5 azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/loki/#providers","text":"Name Version azurerm 2.35.0 helm 1.3.2 kubernetes 1.13.3","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/loki/#inputs","text":"Name Description Type Default Required environment The environment (short name) to use for the deploy string n/a yes kubernetes_namespace_name The Kubernetes namespace name string \"loki\" no location_short The Azure region short name. string n/a yes loki_helm_chart_name The helm chart name for loki string \"loki-stack\" no loki_helm_chart_version The helm chart version for loki string \"2.0.0\" no loki_helm_release_name The helm release name for loki string \"loki\" no loki_helm_repository The helm repository for loki string \"https://grafana.github.io/loki/charts\" no minio_helm_chart_name The helm chart name for minio string \"minio\" no minio_helm_chart_version The helm chart version for minio string \"8.0.0\" no minio_helm_release_name The helm release name for minio string \"loki-minio\" no minio_helm_repository The helm repository for minio string \"https://helm.min.io/\" no name The name to use for the deploy string n/a yes resource_group_name The resource group name string \"\" no storage_account_configuration The storage account configuration object({ account_tier = string account_replication_type = string account_kind = string }) { \"account_kind\": \"StorageV2\", \"account_replication_type\": \"GRS\", \"account_tier\": \"Standard\" } no storage_account_name The storage account name string \"\" no storage_container_name The storage container name string \"loki\" no","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/loki/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/opa-gatekeeper/","text":"Open Policy Agent Gatekeeper (opa-gatekeeper) This module is used to add opa-gatekeeper to Kubernetes clusters. Details This module also adds opinionated defaults from the gatekeeper-library that Xenit hosts (and aggregates the gatekeeper-library OPA hosts). Example deployment apiVersion: apps/v1 kind: Deployment metadata: name: podinfo labels: app: podinfo spec: replicas: 1 strategy: type: RollingUpdate rollingUpdate: maxUnavailable: 1 selector: matchLabels: app: podinfo template: metadata: labels: app: podinfo spec: terminationGracePeriodSeconds: 30 containers: - name: podinfo image: \"ghcr.io/stefanprodan/podinfo:5.0.3\" imagePullPolicy: \"IfNotPresent\" command: - ./podinfo - --port=8080 - --level=info env: - name: PODINFO_UI_MESSAGE value: \"WELCOME TO PODINFO!\" ports: - name: http containerPort: 8080 protocol: TCP readinessProbe: exec: command: - podcli - check - http - localhost:8080/readyz initialDelaySeconds: 1 timeoutSeconds: 5 volumeMounts: - name: data mountPath: /data securityContext: allowPrivilegeEscalation: false readOnlyRootFilesystem: true capabilities: drop: - NET_RAW volumes: - name: data emptyDir: {} Required parts are securityContext and usually mounting an emptyDir to either a data directory or tmp. Requirements Name Version terraform 0.13.5 helm 1.3.2 Providers Name Version helm 1.3.2 Inputs Name Description Type Default Required additional_constraints Additional constraints that should be added list(object({ kind = string name = string enforcement_action = string match = object({ kinds = list(object({ apiGroups = list(string) kinds = list(string) })) namespaces = list(string) }) parameters = any })) [] no default_constraints Default constraints that should be added list(object({ kind = string name = string enforcement_action = string match = object({ kinds = list(object({ apiGroups = list(string) kinds = list(string) })) namespaces = list(string) }) parameters = any })) [ { \"enforcement_action\": \"\", \"kind\": \"K8sPSPAllowPrivilegeEscalationContainer\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-allow-privilege-escalation-container\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPHostNamespace\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-host-namespace\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPHostNetworkingPorts\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-host-network-ports\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPFlexVolumes\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-flexvolume-drivers\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPPrivilegedContainer\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-privileged-container\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPProcMount\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-proc-mount\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPReadOnlyRootFilesystem\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-readonlyrootfilesystem\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPVolumeTypes\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-volume-types\", \"parameters\": { \"volumes\": [ \"configMap\", \"downwardAPI\", \"emptyDir\", \"persistentVolumeClaim\", \"secret\", \"projected\" ] } }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPCapabilities\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-capabilities\", \"parameters\": { \"allowedCapabilities\": [ \"\" ], \"requiredDropCapabilities\": [ \"NET_RAW\" ] } }, { \"enforcement_action\": \"\", \"kind\": \"K8sBlockNodePort\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"block-node-port\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sRequiredProbes\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"required-probes\", \"parameters\": { \"probeTypes\": [ \"tcpSocket\", \"httpGet\", \"exec\" ], \"probes\": [ \"readinessProbe\" ] } }, { \"enforcement_action\": \"\", \"kind\": \"K8sPodPriorityClass\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"pod-priority-class\", \"parameters\": {} } ] no exclude Namespaces to opt out of constraints list(object({ excluded_namespaces = list(string) processes = list(string) })) [ { \"excluded_namespaces\": [ \"kube-system\", \"gatekeeper-system\" ], \"processes\": [ \"*\" ] } ] no Outputs No output.","title":"Open Policy Agent Gatekeeper (opa-gatekeeper)"},{"location":"terraform-modules/modules/kubernetes/opa-gatekeeper/#open-policy-agent-gatekeeper-opa-gatekeeper","text":"This module is used to add opa-gatekeeper to Kubernetes clusters.","title":"Open Policy Agent Gatekeeper (opa-gatekeeper)"},{"location":"terraform-modules/modules/kubernetes/opa-gatekeeper/#details","text":"This module also adds opinionated defaults from the gatekeeper-library that Xenit hosts (and aggregates the gatekeeper-library OPA hosts).","title":"Details"},{"location":"terraform-modules/modules/kubernetes/opa-gatekeeper/#example-deployment","text":"apiVersion: apps/v1 kind: Deployment metadata: name: podinfo labels: app: podinfo spec: replicas: 1 strategy: type: RollingUpdate rollingUpdate: maxUnavailable: 1 selector: matchLabels: app: podinfo template: metadata: labels: app: podinfo spec: terminationGracePeriodSeconds: 30 containers: - name: podinfo image: \"ghcr.io/stefanprodan/podinfo:5.0.3\" imagePullPolicy: \"IfNotPresent\" command: - ./podinfo - --port=8080 - --level=info env: - name: PODINFO_UI_MESSAGE value: \"WELCOME TO PODINFO!\" ports: - name: http containerPort: 8080 protocol: TCP readinessProbe: exec: command: - podcli - check - http - localhost:8080/readyz initialDelaySeconds: 1 timeoutSeconds: 5 volumeMounts: - name: data mountPath: /data securityContext: allowPrivilegeEscalation: false readOnlyRootFilesystem: true capabilities: drop: - NET_RAW volumes: - name: data emptyDir: {} Required parts are securityContext and usually mounting an emptyDir to either a data directory or tmp.","title":"Example deployment"},{"location":"terraform-modules/modules/kubernetes/opa-gatekeeper/#requirements","text":"Name Version terraform 0.13.5 helm 1.3.2","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/opa-gatekeeper/#providers","text":"Name Version helm 1.3.2","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/opa-gatekeeper/#inputs","text":"Name Description Type Default Required additional_constraints Additional constraints that should be added list(object({ kind = string name = string enforcement_action = string match = object({ kinds = list(object({ apiGroups = list(string) kinds = list(string) })) namespaces = list(string) }) parameters = any })) [] no default_constraints Default constraints that should be added list(object({ kind = string name = string enforcement_action = string match = object({ kinds = list(object({ apiGroups = list(string) kinds = list(string) })) namespaces = list(string) }) parameters = any })) [ { \"enforcement_action\": \"\", \"kind\": \"K8sPSPAllowPrivilegeEscalationContainer\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-allow-privilege-escalation-container\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPHostNamespace\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-host-namespace\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPHostNetworkingPorts\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-host-network-ports\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPFlexVolumes\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-flexvolume-drivers\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPPrivilegedContainer\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-privileged-container\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPProcMount\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-proc-mount\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPReadOnlyRootFilesystem\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-readonlyrootfilesystem\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPVolumeTypes\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-volume-types\", \"parameters\": { \"volumes\": [ \"configMap\", \"downwardAPI\", \"emptyDir\", \"persistentVolumeClaim\", \"secret\", \"projected\" ] } }, { \"enforcement_action\": \"\", \"kind\": \"K8sPSPCapabilities\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"psp-capabilities\", \"parameters\": { \"allowedCapabilities\": [ \"\" ], \"requiredDropCapabilities\": [ \"NET_RAW\" ] } }, { \"enforcement_action\": \"\", \"kind\": \"K8sBlockNodePort\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"block-node-port\", \"parameters\": {} }, { \"enforcement_action\": \"\", \"kind\": \"K8sRequiredProbes\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"required-probes\", \"parameters\": { \"probeTypes\": [ \"tcpSocket\", \"httpGet\", \"exec\" ], \"probes\": [ \"readinessProbe\" ] } }, { \"enforcement_action\": \"\", \"kind\": \"K8sPodPriorityClass\", \"match\": { \"kinds\": [], \"namespaces\": [] }, \"name\": \"pod-priority-class\", \"parameters\": {} } ] no exclude Namespaces to opt out of constraints list(object({ excluded_namespaces = list(string) processes = list(string) })) [ { \"excluded_namespaces\": [ \"kube-system\", \"gatekeeper-system\" ], \"processes\": [ \"*\" ] } ] no","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/opa-gatekeeper/#outputs","text":"No output.","title":"Outputs"},{"location":"terraform-modules/modules/kubernetes/velero/","text":"Velero This module is used to add velero to Kubernetes clusters. Requirements Name Version terraform 0.13.5 helm 1.3.2 kubernetes 1.13.3 Providers Name Version helm 1.3.2 kubernetes 1.13.3 Inputs Name Description Type Default Required azure_client_id Client ID for MSI authentication string \"\" no azure_resource_group Azure resource group for DNS zone string \"\" no azure_resource_id Principal ID fo MSI authentication string \"\" no azure_storage_account_container Azure storage account container name string \"\" no azure_storage_account_name Azure storage account name string \"\" no azure_subscription_id Azure subscription ID for DNS zone string \"\" no cloud_provider Cloud provider to use. string \"azure\" no Outputs No output.","title":"Velero"},{"location":"terraform-modules/modules/kubernetes/velero/#velero","text":"This module is used to add velero to Kubernetes clusters.","title":"Velero"},{"location":"terraform-modules/modules/kubernetes/velero/#requirements","text":"Name Version terraform 0.13.5 helm 1.3.2 kubernetes 1.13.3","title":"Requirements"},{"location":"terraform-modules/modules/kubernetes/velero/#providers","text":"Name Version helm 1.3.2 kubernetes 1.13.3","title":"Providers"},{"location":"terraform-modules/modules/kubernetes/velero/#inputs","text":"Name Description Type Default Required azure_client_id Client ID for MSI authentication string \"\" no azure_resource_group Azure resource group for DNS zone string \"\" no azure_resource_id Principal ID fo MSI authentication string \"\" no azure_storage_account_container Azure storage account container name string \"\" no azure_storage_account_name Azure storage account name string \"\" no azure_subscription_id Azure subscription ID for DNS zone string \"\" no cloud_provider Cloud provider to use. string \"azure\" no","title":"Inputs"},{"location":"terraform-modules/modules/kubernetes/velero/#outputs","text":"No output.","title":"Outputs"}]}