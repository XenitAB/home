(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{108:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return s}));var r=n(3),a=n(7),o=(n(0),n(138)),l={title:"AWS Terraform modules",slug:"/terraform-modules/aws",custom_edit_url:"https://github.com/XenitAB/terraform-modules/edit/main/modules/aws/README.md",sidebar_label:"Overview"},i={unversionedId:"terraform-modules/aws/README",id:"terraform-modules/aws/README",isDocsHomePage:!1,title:"AWS Terraform modules",description:"This directory contains all the AWS Terraform modules.",source:"@site/docs/terraform-modules/aws/README.md",slug:"/terraform-modules/aws",permalink:"/docs/terraform-modules/aws",editUrl:"https://github.com/XenitAB/terraform-modules/edit/main/modules/aws/README.md",version:"current",sidebar_label:"Overview"},c=[{value:"Modules",id:"modules",children:[]},{value:"Style Guide",id:"style-guide",children:[{value:"Names and tags",id:"names-and-tags",children:[]}]}],u={rightToc:c};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This directory contains all the AWS Terraform modules."),Object(o.b)("h2",{id:"modules"},"Modules"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/terraform-modules/aws/core"}),Object(o.b)("inlineCode",{parentName:"a"},"core"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/terraform-modules/aws/eks-global"}),Object(o.b)("inlineCode",{parentName:"a"},"eks-global"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/terraform-modules/aws/eks"}),Object(o.b)("inlineCode",{parentName:"a"},"eks"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/terraform-modules/aws/irsa"}),Object(o.b)("inlineCode",{parentName:"a"},"irsa")))),Object(o.b)("h2",{id:"style-guide"},"Style Guide"),Object(o.b)("p",null,"This section covers AWS specific standards that all modules should try to follow to decrease the risk of annoying problems in the future, and to guide\nnew contributors in how resources should be named. Any changes to this guide should be done together with updating the Terraform."),Object(o.b)("h3",{id:"names-and-tags"},"Names and tags"),Object(o.b)("p",null,"A quirk of AWS is that there are some resources that are global and other that are regional. On top of that there are resources that get automatically\ngenerated IDs and others that use the given name as a unique ID. That name may either have to be unique within the account or across all AWS accounts\nin all regions."),Object(o.b)("p",null,"Global resources with unique names:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"IAM Roles"),Object(o.b)("li",{parentName:"ul"},"IAM Policy"),Object(o.b)("li",{parentName:"ul"},"S3 Bucket")),Object(o.b)("p",null,"Regional resources with unique names:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"EKS Clusters")),Object(o.b)("p",null,"Any resource that has a generated ID should have tags to distinguish the resources between each other. The following tags should be added to all\nresources of this kind. Try to make sure that the values are unique enough that there is no overlap."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Tag"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Required"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Name"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Name of the resource, try to convey the purpose or use.")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Environment"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Environment the resource is deployed in.")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Module"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The name of the Terraform module which has created the resource.")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Cluster"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"No"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"If the resources is specific to an EKS cluster the cluster name should be entered here.")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Application"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"No"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Name of the application the resource may be tightly linked to.")))),Object(o.b)("p",null,"Resources that are global and require unique names should contain enough unique components to mitigate any name conflicts caused by multi region\ndeployments. This is especially important for IAM resources. On top of this the resources should also include the tags according to the standard above\nbut without the name. IAM resources should follow the same naming convention to reduce confusion and mitigate future issues. Keep in mind when naming\nthings that the name limit of IAM resources is 128 characters. Each IAM resource should follow the same convention, starting with a name prefix, the\nregion, and the environment."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"<name-prefix>-<aws-region>-<environment>-<resource-name>\n\nor\n\n<name-prefix>-<aws-region>-<environment>-<resource-name><instance-id>\n")),Object(o.b)("p",null,"For S3 buckets its is a good idea to use the same naming convention but also include the ",Object(o.b)("inlineCode",{parentName:"p"},"unique_suffix")," to make sure that there are no other conflicts."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"<name-prefix>-<aws-region>-<environment>-<resource-name>-<unique-suffix>\n")),Object(o.b)("p",null,"Lastly resources that are regional but require a unique name should include the environment in the name."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"<resouce-name><instance-id>-<environment>\n")))}s.isMDXComponent=!0},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a.a.createContext({}),s=function(e){var t=a.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=s(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),b=s(n),d=r,p=b["".concat(l,".").concat(d)]||b[d]||m[d]||o;return n?a.a.createElement(p,i(i({ref:t},u),{},{components:n})):a.a.createElement(p,i({ref:t},u))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);