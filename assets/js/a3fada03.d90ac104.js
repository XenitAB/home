"use strict";(self.webpackChunkhome=self.webpackChunkhome||[]).push([[192],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return g}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(n),g=r,m=d["".concat(c,".").concat(g)]||d[g]||p[g]||a;return n?o.createElement(m,i(i({ref:t},u),{},{components:n})):o.createElement(m,i({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3919:function(e,t,n){function o(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!o(e)}n.d(t,{b:function(){return o},Z:function(){return r}})},4996:function(e,t,n){n.d(t,{C:function(){return a},Z:function(){return i}});var o=n(2263),r=n(3919);function a(){var e=(0,o.Z)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,a=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,o){var a=void 0===o?{}:o,i=a.forcePrependBaseUrl,l=void 0!==i&&i,c=a.absolute,s=void 0!==c&&c;if(!n)return n;if(n.startsWith("#"))return n;if((0,r.b)(n))return n;if(l)return t+n;var u=n.startsWith(t)?n:t+n.replace(/^\//,"");return s?e+u:u}(a,n,e,t)}}}function i(e,t){return void 0===t&&(t={}),(0,a().withBaseUrl)(e,t)}},1453:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var o=n(7462),r=n(3366),a=(n(7294),n(3905)),i=(n(4996),["components"]),l={id:"monitoring",title:"Monitoring"},c=void 0,s={unversionedId:"xks/developer-guide/monitoring",id:"xks/developer-guide/monitoring",isDocsHomePage:!1,title:"Monitoring",description:"Monitoring applications is an especially important feature when developing microservices. Currently the only supported monitoring solution XKS",source:"@site/docs/xks/developer-guide/monitoring.md",sourceDirName:"xks/developer-guide",slug:"/xks/developer-guide/monitoring",permalink:"/docs/xks/developer-guide/monitoring",editUrl:"https://github.com/xenitab/xenitab.github.io/edit/main/docs/xks/developer-guide/monitoring.md",tags:[],version:"current",frontMatter:{id:"monitoring",title:"Monitoring"},sidebar:"docs",previous:{title:"Cloud IAM",permalink:"/docs/xks/developer-guide/cloud-iam"},next:{title:"Security",permalink:"/docs/xks/developer-guide/security"}},u=[{value:"Datadog",id:"datadog",children:[{value:"Logging",id:"logging",children:[],level:3},{value:"Metrics",id:"metrics",children:[],level:3},{value:"Tracing",id:"tracing",children:[],level:3}],level:2}],p={toc:u};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Monitoring applications is an especially important feature when developing microservices. Currently the only supported monitoring solution XKS\nsupports is ",(0,a.kt)("a",{parentName:"p",href:"https://www.datadoghq.com"},"Datadog"),", but more can be added in the future."),(0,a.kt)("h2",{id:"datadog"},"Datadog"),(0,a.kt)("p",null,"When Datadog monitoring is used the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/DataDog/datadog-operator"},"Datadog Operator")," will be added to the cluster. On top of deploying a\nDatadog agent to every node to collect metrics, logs, and traces it also adds the ability to create Datadog monitors from the cluster. The Datadog\nagent handles all communication with the Datadog API meaning that individual applications do not have to deal with thing such as authentication."),(0,a.kt)("h3",{id:"logging"},"Logging"),(0,a.kt)("p",null,"All logs written to ",(0,a.kt)("inlineCode",{parentName:"p"},"stdout")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"stderr")," from applications in the tenant namespace will be collected by the Datadog agents. This means that no additional\nconfiguration has to be done to the application, other than making sure the logs are written to the correct destination.\nThis means that ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl logs")," and Datadog will display the same information."),(0,a.kt)("p",null,"Check the official ",(0,a.kt)("a",{parentName:"p",href:"https://docs.datadoghq.com/agent/kubernetes/log/?tab=daemonset"},"Datadog Logging Documentation")," for more detailed information."),(0,a.kt)("h3",{id:"metrics"},"Metrics"),(0,a.kt)("p",null,"Datadog can collect exposed Prometheus or OpenMetrics from your application. In simple terms this means that the application needs to expose an\nendpoint which the Datadog agent can scrape to get the metrics. All that is required is that the Pod contains annotations which tells Datadog where to\nfind the metrics."),(0,a.kt)("p",null,"Given that your application is exposing metrics on port 8080 your pod should contain the following annotations."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'annotations:\n    ad.datadoghq.com/prometheus-example.instances: |\n      [\n        {\n          "prometheus_url": "http://%%host%%:8080/metrics",\n        }\n      ]\n')),(0,a.kt)("p",null,"Check the official ",(0,a.kt)("a",{parentName:"p",href:"https://docs.datadoghq.com/agent/kubernetes/prometheus/"},"Datadog Metrics Documentation")," for more detailed information."),(0,a.kt)("h3",{id:"tracing"},"Tracing"),(0,a.kt)("p",null,"Datadog tracing is done with Application Performance Monitoring (APM), which sends traces from an application to Datadog. For traces to work the\napplication needs to be configured with the language specific libraries. Check the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.datadoghq.com/tracing/setup_overview/"},"Language\nDocumentation")," for language specific instructions. Some of the languages that are supported are."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Golang"),(0,a.kt)("li",{parentName:"ul"},"C#"),(0,a.kt)("li",{parentName:"ul"},"Java"),(0,a.kt)("li",{parentName:"ul"},"Python")),(0,a.kt)("p",null,"Configure your Deployment with the ",(0,a.kt)("inlineCode",{parentName:"p"},"DD_AGENT_HOST")," environment for the APM agent to know where to send the traces."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-.yaml"},"apiVersion: apps/v1\nkind: Deployment\nspec:\n  containers:\n    - env:\n        - name: DD_AGENT_HOST\n          valueFrom:\n            fieldRef:\n              fieldPath: status.hostIP\n")),(0,a.kt)("p",null,"Check the official ",(0,a.kt)("a",{parentName:"p",href:"https://docs.datadoghq.com/agent/kubernetes/apm/?tab=helm"},"Datadog Tracing Documentation")," for more detailed information."))}d.isMDXComponent=!0}}]);